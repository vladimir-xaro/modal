!function(i,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Modal=t():i.Modal=t()}(globalThis,(function(){return(()=>{"use strict";var i={458:(i,t,n)=>{n.r(t),n.d(t,{default:()=>r});const s=class{constructor(i={}){this.events={};for(let t in i)i[t]&&this.subscribe(t,i[t])}subscribe(i,t){this.has(i)||(this.events[i]=[]);let n=[];if(Array.isArray(t))for(const s of t)n.push(...this.subscribe(i,s));else this.events[i].push(t),n.push((()=>this.removeListener(i,t)));return n}unsubscribe(...i){for(const t of i)this.events[t]&&delete this.events[t]}removeListener(i,t){if(Array.isArray(this.events[i])){const n=this.events[i].indexOf(t);n>-1&&this.events[i].splice(n,1)}}once(i,t){const n=this.subscribe(i,(()=>{if(n[0](),Array.isArray(t))for(const i of t)i();else t()}))}has(i){return!!this.events[i]}listenerCount(i){return!!this.events.hasOwnProperty(i)&&this.events[i].length}emit(i,...t){const n=this.events[i];if(n)for(let i of n)i(...t)}validateEmit(i,...t){const n=this.events[i];if(!n)return!1;for(const i of n)if(!i(...t))return!1;return!0}seriesEmit(i,...t){const n=this.events[i];if(!n)return;let s;for(let i=0;i<n.length;i++)s=0===i?n[i](...t):n[i](s);return s}};function e(...i){const t=Object(i[0]);for(let n=1;n<i.length;n+=1){const s=i[n];if(null!=s){const i=Object.keys(Object(s));for(let n=0,a=i.length;n<a;n+=1){const a=i[n],c=Object.getOwnPropertyDescriptor(s,a);void 0!==c&&c.enumerable&&(o(t[a])&&o(s[a])?e(t[a],s[a]):!o(t[a])&&o(s[a])?(t[a]={},e(t[a],s[a])):t[a]=s[a])}}}return t}function o(i){return"object"==typeof i&&null!==i&&i.constructor&&i.constructor===Object}const a={el:null,dom:{backdrop:null,container:null},visible:!1,animations:!0,transitions:!1,closeAttr:"data-modal-close",allow:{closeEsc:!0,closeAttr:!0,animateContainer:!0,animateBackdrop:!0},selector:{container:".modal__container",backdrop:".modal__backdrop",closeBtn:".modal__btn-close"},classes:{visible:"modal--visible",animation:{cancel:"modal-animation--cancel",show:{container:"modal-animation-container--show",backdrop:"modal-animation-backdrop--show"},hide:{container:"modal-animation-container--hide",backdrop:"modal-animation-backdrop--hide"}},transition:{cancel:"modal-transition--cancel",show:{container:"modal-transition-container--show",backdrop:"modal-transition-backdrop--show"},hide:{container:"modal-transition-container--hide",backdrop:"modal-transition-backdrop--hide"}}}};class c{constructor(i){if(this.pending=!1,this.animation={container:!1,backdrop:!1},this.emitter=new s(i.on),this.config=e(a,i),this.config.dom.backdrop||(this.config.dom.backdrop=this.config.el.querySelector(".modal__backdrop")),!this.config.dom.container){const i=this.config.el.querySelector(".modal__container");if(!i)throw new Error("[Modal] Container does not exists");this.config.dom.container=i}this.__closeAttrListener=this.__closeAttrListener.bind(this),this.__closeEscListener=this.__closeEscListener.bind(this),this.config.animations?(this.__containerAnimationEndListener=this.__containerAnimationEndListener.bind(this),this.__backdropAnimationEndListener=this.__backdropAnimationEndListener.bind(this),this.config.dom.container.addEventListener("animationend",this.__containerAnimationEndListener),this.config.dom.backdrop?.addEventListener("animationend",this.__backdropAnimationEndListener)):this.config.transitions&&(this.__containerTransitionEndListener=this.__containerTransitionEndListener.bind(this),this.__backdropTransitionEndListener=this.__backdropTransitionEndListener.bind(this),this.config.dom.container.addEventListener("transitionend",this.__containerTransitionEndListener),this.config.dom.backdrop?.addEventListener("transitionend",this.__backdropTransitionEndListener))}__closeAttrListener(i){this.hide(),this.emitter.emit("closeAttrClick",this,i)}__closeEscListener(i){i.stopPropagation(),"Escape"===i.code&&(this.hide(),this.emitter.emit("escKey",this,i))}__containerAnimationEndListener(i){this.emitter.emit("containerAnimationEnd",this,i)}__backdropAnimationEndListener(i){this.emitter.emit("backdropAnimationEnd",this,i)}__containerTransitionEndListener(i){this.emitter.emit("containerTransitionEnd",this,i)}__backdropTransitionEndListener(i){this.emitter.emit("backdropTransitionEnd",this,i)}addListeners(){const i=this.config.el.querySelectorAll(`[${this.config.closeAttr}]`);for(const t of i)t.addEventListener("click",this.__closeAttrListener);document.addEventListener("keyup",this.__closeEscListener)}removeListeners(){const i=this.config.el.querySelectorAll(`[${this.config.closeAttr}]`);for(const t of i)t.removeEventListener("click",this.__closeAttrListener);document.removeEventListener("keyup",this.__closeEscListener)}animationEndCallback(i,t,n,s){console.log("animationEndCallback",i),this.animation[i]=!1,this.config.dom[t]&&this.animation[t]||(this.pending=!1,n&&this.config.el.classList.remove(this.config.classes.visible),this.emitter.emit("Hide",this,s))}transitionEndCallback(i,t,n,s){console.log("transitionEndCallback",i),this.animation[i]=!1,this.config.dom[t]&&this.animation[t]||(this.pending=!1,n&&this.config.el.classList.remove(this.config.classes.visible),this.emitter.emit("Hide",this,s))}get visible(){return this.config.visible}set visible(i){this.config.visible=!!i}show(i){if(this.visible)return;const t=this.config.el,n=this.config.dom.container,s=this.config.dom.backdrop;this.pending&&(this.config.animations?(n.classList.add(this.config.classes.animation.cancel),s?.classList.add(this.config.classes.animation.cancel)):this.config.transitions&&(n.classList.add(this.config.classes.transition.cancel),s?.classList.add(this.config.classes.transition.cancel)),this.emitter.unsubscribe("containerAnimationEnd","backdropAnimationEnd")),this.emitter.emit("beforeShow",this),this.visible=!0,document.activeElement&&document.hasFocus()&&(c.blurEl=document.activeElement,document.activeElement.blur()),this.config.animations?(this.pending=!0,n.classList.remove(this.config.classes.animation.hide.container,this.config.classes.animation.cancel),s?.classList.remove(this.config.classes.animation.hide.backdrop,this.config.classes.animation.cancel)):this.config.transitions&&(this.pending=!0,n.classList.remove(this.config.classes.transition.hide.container,this.config.classes.transition.cancel),s?.classList.remove(this.config.classes.transition.hide.backdrop,this.config.classes.transition.cancel)),t.classList.add(this.config.classes.visible),this.config.animations?(this.animation.container=!0,n.classList.add(this.config.classes.animation.show.container),s&&(this.animation.backdrop=!0,s.classList.add(this.config.classes.animation.show.backdrop))):this.config.transitions&&(this.animation.container=!0,n.classList.add(this.config.classes.transition.show.container),s&&(this.animation.backdrop=!0,s.classList.add(this.config.classes.transition.show.backdrop))),this.addListeners(),document.body.style.overflow="hidden",document.body.style.height="100vh",this.config.animations?(this.emitter.once("containerAnimationEnd",(i=>this.animationEndCallback("container","backdrop",!1,i))),this.emitter.once("backdropAnimationEnd",(i=>this.animationEndCallback("backdrop","container",!1,i)))):this.config.transitions?(this.emitter.once("containerTransitionEnd",(i=>this.transitionEndCallback("container","backdrop",!1,i))),this.emitter.once("backdropTransitionEnd",(i=>this.transitionEndCallback("backdrop","container",!1,i)))):this.emitter.emit("afterShow",this)}hide(i){if(!this.visible)return;const t=this.config.el,n=this.config.dom.container,s=this.config.dom.backdrop;this.pending&&(this.config.animations?(n.classList.add(this.config.classes.animation.cancel),s?.classList.add(this.config.classes.animation.cancel)):this.config.transitions&&(n.classList.add(this.config.classes.transition.cancel),s?.classList.add(this.config.classes.transition.cancel)),this.emitter.unsubscribe("containerAnimationEnd","backdropAnimationEnd"),this.pending=!1),this.emitter.emit("beforeHide",this),this.removeListeners(),this.visible=!1,this.config.animations?(this.pending=!0,this.animation.container=!0,n.classList.remove(this.config.classes.animation.show.container,this.config.classes.animation.cancel),s&&(this.animation.backdrop=!0,s.classList.remove(this.config.classes.animation.show.backdrop,this.config.classes.animation.cancel),s.classList.add(this.config.classes.animation.hide.backdrop)),n.classList.add(this.config.classes.animation.hide.container)):this.config.transitions&&(this.pending=!0,this.animation.container=!0,n.classList.remove(this.config.classes.transition.show.container,this.config.classes.transition.cancel),s&&(this.animation.backdrop=!0,s.classList.remove(this.config.classes.transition.show.backdrop,this.config.classes.transition.cancel),s.classList.add(this.config.classes.transition.hide.backdrop)),n.classList.add(this.config.classes.transition.hide.container)),c.blurEl&&c.blurEl.focus(),c.blurEl=null,document.body.style.overflow="",document.body.style.height="",this.config.animations?(this.emitter.once("backdropAnimationEnd",(i=>this.animationEndCallback("backdrop","container",!0,i))),this.emitter.once("containerAnimationEnd",(i=>this.animationEndCallback("container","backdrop",!0,i)))):this.config.transitions?(this.emitter.once("backdropTransitionEnd",(i=>this.transitionEndCallback("backdrop","container",!0,i))),this.emitter.once("containerTransitionEnd",(i=>this.transitionEndCallback("container","backdrop",!0,i)))):(this.emitter.emit("afterHide",this),t.classList.remove(this.config.classes.visible))}}c.blurEl=null;const r=c}},t={};function n(s){if(t[s])return t[s].exports;var e=t[s]={exports:{}};return i[s](e,e.exports,n),e.exports}return n.d=(i,t)=>{for(var s in t)n.o(t,s)&&!n.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:t[s]})},n.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),n.r=i=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},n(458)})()}));
//# sourceMappingURL=Modal.umd.min.js.map